<%= content_for(:page, "challenge") %>

<div class="card-challenge">
<!-- carroussel présentant les différents challenges de la catégorie qui sont acceissbles (qui n'ont pas encore étét faits) -->
  <div id="carouselExampleControls" class="carousel slide"  data-interval="false" data-ride="carousel">
    <div class="carousel-inner">
      <% @undone_challenges.each_with_index do |challenge, index| %>
            <% active = index == 0 ? "active" : "" %>
            <div class="carousel-item <%= active%>">
              <div class="card bg-<%= challenge.category.gsub(/\s+/, "").downcase %>" style="height: 453px">
                <div class="card-body padd">
                  <div class="card-inside-color-<%= challenge.category.gsub(/\s+/, "").downcase %>">
                    <h2 class="card-title"><em><%= challenge.title %></em></h2>
                    <%= image_tag challenge.show_category_logo, size: "100" %>
                    <h6 class="card-text"><%= challenge.description %></p>
                    <br>
                    <div class="btn-challenge">
                      <%= link_to "Let's go!", "#", data: {toggle: "modal", target: "#modal#{challenge.id}"} %>
                      <svg>
                        <polyline class="o1" points="0 0, 150 0, 150 55, 0 55, 0 0"></polyline>
                        <polyline class="o2" points="0 0, 150 0, 150 55, 0 55, 0 0"></polyline>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="modal<%= challenge.id %>" tabindex="-1" role="dialog" aria-labelledby="modalChallengeAcceptedTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="modalChallengeAcceptedTitle">Great ! You can be proud !</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <p>Do you know who challenged you ? <%= link_to "Learn more", role_model_path(challenge.role_model), class: "tooltip-test", title: "Curiosity can be can thing !" %> about this person.</p>
                    <p>She might be your new Favorite Role Model</p>
                    <hr>
                    <h5>Validate your challenge !</h5>
                    <p>When you're done, don't forget to go back at your dashboard, give a feeback to mark your challenge as done !</p>
                  </div>
                  <div class="modal-footer">
                    <%= link_to "Ok !", challenge_participations_path(challenge), method: :post, class: "btn-3d"  %>
                  </div>
                </div>
              </div>
            </div>
      <% end %>

      <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon size-chevron" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon size-chevron" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>

    </div>
  </div>


</div>


